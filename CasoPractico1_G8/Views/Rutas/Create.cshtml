@model CasoPractico1_G8.Models.Ruta

<h2>Crear Ruta</h2>
<form asp-action="Create" method="post">
    <div class="form-group">
        <label asp-for="CodigoRuta"></label>
        <input asp-for="CodigoRuta" class="form-control" required readonly />
    </div>
    <div class="form-group">
        <label asp-for="Nombre"></label>
        <input asp-for="Nombre" class="form-control" required />
    </div>
    <div class="form-group">
        <label asp-for="Descripcion"></label>
        <textarea asp-for="Descripcion" class="form-control"></textarea>
    </div>
    <div class="form-group">
        <label asp-for="Estado"></label>
        <select asp-for="Estado" class="form-control">
            <option value="true">Activo</option>
            <option value="false">Inactivo</option>
        </select>
    </div>

    <!-- Sección de Paradas -->
    <h3>Seleccionar Paradas</h3>
    <div class="card-deck" id="paradas-container">
        @if (ViewData["Paradas"] != null)
        {
            var paradas = ViewData["Paradas"] as MultiSelectList;
            foreach (var parada in paradas)
            {
                <div class="card parada-card" style="width: 18rem;">
                    <img class="card-img-top" src="https://via.placeholder.com/150" alt="Card image cap">
                    <div class="card-body">
                        <h5 class="card-title">@parada.Text</h5>
                        <p class="card-text">Descripción breve</p>
                        <input type="checkbox" name="ParadasSeleccionadas" value="@parada.Value" class="parada-checkbox"> Seleccionar
                    </div>
                </div>
            }
        }
    </div>

    <!-- Sección de Horarios -->
    <h3>Seleccionar Horarios</h3>
    <div class="card-deck" id="horarios-container">
        @if (ViewData["Horarios"] != null)
        {
            var horarios = ViewData["Horarios"] as MultiSelectList;
            foreach (var horario in horarios)
            {
                <div class="card horario-card" style="width: 18rem;">
                    <div class="card-body">
                        <h5 class="card-title">@horario.Text</h5>
                        <p class="card-text">Hora de salida: @horario.Text</p>
                        <input type="checkbox" name="HorariosSeleccionados" value="@horario.Value" class="horario-checkbox"> Seleccionar
                    </div>
                </div>
            }
        }
    </div>

    <button type="submit" class="btn btn-primary">Guardar</button>
</form>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Seleccionar/Deseleccionar todas las paradas
            $(".parada-card").click(function () {
                $(this).find('.parada-checkbox').prop("checked", !$(this).find('.parada-checkbox').prop("checked"));
            });

            // Seleccionar/Deseleccionar todos los horarios
            $(".horario-card").click(function () {
                $(this).find('.horario-checkbox').prop("checked", !$(this).find('.horario-checkbox').prop("checked"));
            });
        });
    </script>
}
